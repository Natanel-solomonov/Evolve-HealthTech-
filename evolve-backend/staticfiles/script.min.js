document.addEventListener("DOMContentLoaded", (() => { const e = document.querySelector('.form-input[type="tel"]'), t = document.querySelector(".waitlist-button"); e && t && (t.disabled = !0, e.addEventListener("input", (e => { let n = e.target.value.replace(/\D/g, ""); n.length > 10 && (n = n.substring(0, 10)); let o = ""; n.length > 0 && (o = "(" + n.substring(0, 3)), n.length >= 4 && (o += ") " + n.substring(3, 6)), n.length >= 7 && (o += "-" + n.substring(6, 10)), "deleteContentBackward" === e.inputType && (e.target.value.endsWith(") ") || e.target.value.endsWith("-")) && n.length > 0 && (n = n.slice(0, -1), o = "", n.length > 0 && (o = "(" + n.substring(0, 3)), n.length >= 4 && (o += ") " + n.substring(3, 6)), n.length >= 7 && (o += "-" + n.substring(6, 10))), e.target.value = o, 10 === n.length ? t.disabled = !1 : t.disabled = !0 }))); const n = document.getElementById("schoolNameInput"), o = document.getElementById("schoolSuggestions"), s = document.getElementById("schoolForm"), l = document.getElementById("confirmSchoolButton"); if (n && o && l) { let e = !1; const t = n.dataset.autocompleteUrl, i = n.dataset.initialSchoolName; i ? (e = !0, l.disabled = !1) : l.disabled = !0; const a = function (e, t) { let n; return function (...o) { const s = this; clearTimeout(n), n = setTimeout((() => e.apply(s, o)), t) } }((async function (s) { if (s.length < 2) o.style.display = "none"; else try { const i = await fetch(`${t}?term=${encodeURIComponent(s)}`); if (!i.ok) return console.error("Error fetching schools:", i.statusText), void (o.style.display = "none"); const a = await i.json(); o.innerHTML = "", a.length > 0 ? (a.forEach((t => { const s = document.createElement("div"); s.textContent = t, s.addEventListener("click", (function () { n.value = this.textContent, o.innerHTML = "", o.style.display = "none", e = !0, l.disabled = !1, n.focus() })), o.appendChild(s) })), o.style.display = "block") : o.style.display = "none" } catch (e) { console.error("Request failed:", e), o.style.display = "none" } }), 300); n.addEventListener("input", (function () { const t = this.value; "" === t.trim() && i ? (e = !0, l.disabled = !1) : (t.trim(), e = !1, l.disabled = !0), a(t) })), n.addEventListener("blur", (function () { setTimeout((() => { o.matches(":hover") || (o.style.display = "none") }), 200) })), document.addEventListener("click", (function (e) { e.target === n || o.contains(e.target) || (o.style.display = "none") })), s && s.addEventListener("submit", (function (t) { e || "" === n.value.trim() ? "" !== n.value.trim() || i || (alert("School name cannot be empty."), t.preventDefault()) : (alert("Please select a valid school from the dropdown list."), t.preventDefault()) })) } document.querySelectorAll(".copy-icon").forEach((e => { e.addEventListener("click", (() => { const t = e.dataset.clipboardText; navigator.clipboard.writeText(t).then((() => { console.log("Referral link copied to clipboard!"); const t = e.textContent; e.textContent = "Copied!", setTimeout((() => { e.textContent = t }), 2e3) })).catch((e => { console.error("Failed to copy text: ", e) })) })) })); const i = document.getElementById("successDialog"); if (i) { const e = i.dataset.message; i.dataset.messageTags; e && (i.textContent = e, i.classList.add("show"), e.includes("bumped you up") && "function" == typeof confetti && confetti({ particleCount: 100, spread: 70, origin: { y: .6 } }), setTimeout((() => { i.classList.remove("show"), i.classList.add("fade-out"), setTimeout((() => { i.classList.remove("fade-out"), i.textContent = "" }), 500) }), 4e3)) } }));